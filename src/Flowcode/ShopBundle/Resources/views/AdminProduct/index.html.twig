{% extends 'FlowcodeDashboardBundle:Default:layout.html.twig' %}

{% block stylesheets %}
{{parent()}}
<link rel="stylesheet" href="select2.css">
<link rel="stylesheet" href="select2-bootstrap.css">
{% endblock -%}

{% block body %}
{{ include('FlowcodeShopBundle:AdminProduct:productsHeader.html.twig') }}
<section class="content">

    <div class="box box-solid">
        <div class="box-header">
            <h3>{{ "product list"|trans|title }}</h3>
            <div class="box-tools">
                <a href="{{ path('admin_product_new') }}" class="btn btn-link btn-sm">
                    <i class="fa fa-plus"></i> {{ "new"|trans|title }}
                </a>
            </div>

            <div class="btn-group">
                <div class="panel-heading" style="padding:0px;">               
                    <button type="button" class="btn btn-default btn-sm filter collapsed" data-toggle="collapse" data-target="#filter">{{'filter' | trans | capitalize  }} <i class="fa fa-filter"></i> </button>
                </div>
            </div>
            {% set open = "" %}
            {% if filterON |length > 0 %}
                {% set open = "in" %}
            {% endif %}
            <div id="filter" class="collapse {{open}} row filters-content">
                <form method="get" action="" class=" form-horizontal">
                    <div id="law_filter" class="col-sm-12">
                        <div class="col-sm-6">
                            <div class="col-sm-3">
                                {{ "category"|trans|title }}
                            </div>
                            <select class="categories" name="categories[]" multiple="multiple" style="width: 60%">
                                {% for category in categories %}
                                    <option value="{{category.id}}">{{ category.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <div class="col-sm-3">
                                {{ "name"|trans|title }}
                            </div>
                            <select class="products" name="products[]" multiple="multiple" style="width: 60%">
                                {% for product in products %}
                                    <option value="{{product.id}}">{{ product.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <div class="col-sm-3">
                                {{ "brand"|trans|title }}
                            </div>
                            <select class="brands" name="brands[]" multiple="multiple" style="width: 60%">
                                {% for brand in brands %}
                                    <option value="{{brand.id}}">{{ brand.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <div class="col-sm-3">
                                {{ "industry"|trans|title }}
                            </div>
                            <select class="industries" name="industries[]" multiple="multiple" style="width: 60%">
                                {% for industry in industries %}
                                    <option value="{{industry.id}}">{{ industry.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <div class="col-sm-3">
                                {{ "country"|trans|title }}
                            </div>
                            <select class="countries" name="countries[]" multiple="multiple" style="width: 60%">
                                {% for country in countries %}
                                    <option value="{{country.id}}">{{ country.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="form-group">
                            <div class=" col-sm-9">
                                <a class="btn btn-default btn-sm" href="?reset"><i class="fa fa-times"></i> {{'clean' | trans | capitalize}}</a>
                                <button class="btn btn-primary btn-sm" type="submit">{{'apply' | trans | capitalize}}</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="box-body">
            <table class="records_list table table-condensed">
                <thead>
                    <tr>
                        <th>{{ "Nombre"|trans }}</th>
                        <th>{{ "Descripcion"|trans }}</th>
                        <th>{{ "Precio"|trans }}</th>
                        <th>{{ "Habilitado"|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entity in products %}
                    <tr>
                        <td><a href="{{ path('admin_product_show', { 'id': entity.id }) }}">{{ entity.name }}</a></td>
                        <td>{{ entity.description }}</td>
                        <td>{{ entity.price }}</td>
                        <td>{{ entity.enabled ? 'yes'|trans : 'no'|trans }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
<script type="text/javascript">
    $(document).ready(function() {
        $(".products").select2({
          theme: "classic"
        });
        $(".categories").select2({
          theme: "classic"
        });
        $(".brands").select2({
          theme: "classic"
        });
        $(".industries").select2({
          theme: "classic"
        });
        $(".countries").select2({
          theme: "classic"
        });
    });
                    
</script>
{% endblock %}